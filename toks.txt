#
include
<
stdio
.
h
>
#
include
<
string
.
h
>
#
include
<
stdlib
.
h
>
#
include
"scanner.h"
static
char
*
names
[
]
=
{
"lbrace"
,
"rbrace"
,
"lsquare"
,
"rsquare"
,
"lparen"
,
"rparen"
,
"comma"
,
"dot"
,
"star"
,
"slash"
,
"minus"
,
"plus"
,
"greater-than"
,
"less-than"
,
"equals"
,
"hash"
,
"bang"
,
"arrow"
,
"plus-plus"
,
"minus-minus"
,
"star-equals"
,
"slash-equals"
,
"minus-equals"
,
"plus-equals"
,
"greater-than-equals"
,
"less-than-equals"
,
"equals-equals"
,
"bang-equals"
,
"true"
,
"false"
,
"string"
,
"char"
,
"number"
,
"identifier"
,
"bool"
,
"break"
,
"case"
,
"char"
,
"continue"
,
"do"
,
"double"
,
"else"
,
"enum"
,
"extern"
,
"float"
,
"for"
,
"if"
,
"int"
,
"return"
,
"sizeof"
,
"static"
,
"struct"
,
"switch"
,
"typedef"
,
"union"
,
"void"
,
"while"
,
"semicolon"
,
"eof"
,
"error"
}
;
char
*
readFile
(
char
*
fname
)
{
FILE
*
fp
=
fopen
(
fname
,
"rt"
)
;
fseek
(
fp
,
0
,
SEEK_END
)
;
int
fileSize
=
ftell
(
fp
)
;
rewind
(
fp
)
;
char
*
out
=
malloc
(
fileSize
+
1
)
;
fread
(
out
,
sizeof
(
char
)
,
fileSize
,
fp
)
;
out
[
fileSize
]
=
0
;
fclose
(
fp
)
;
return
out
;
}
int
main
(
int
argc
,
char
*
*
argv
)
{
if
(
argc
!=
2
)
{
printf
(
"Usage: cc [file]\n"
)
;
exit
(
1
)
;
}
char
*
buf
=
readFile
(
argv
[
1
]
)
;
initScanner
(
buf
)
;
FILE
*
fp
=
fopen
(
"toks.txt"
,
"wt"
)
;
Token
t
;
char
writeBuf
[
100
]
;
for
(
t
=
scanNext
(
)
;
t
.
type
!=
TOK_EOF
;
t
=
scanNext
(
)
)
{
memcpy
(
writeBuf
,
t
.
start
,
t
.
length
)
;
writeBuf
[
t
.
length
]
=
0
;
fprintf
(
fp
,
"%s\n"
,
writeBuf
)
;
}
fclose
(
fp
)
;
free
(
buf
)
;
return
0
;
}
}
WindowsPowerShell
WindowsPowerShell
Modules
;
C
C
C
Program
Files
Files
WindowsPowerShell
WindowsPowerShell
Modules
;
C
C
C
WINDOWS
WINDOWS
system3n
system3n
system3n
system3n
system3n
system3n
system3n
system3n
system3n
tcJ
"
"
"
"
"
Modules
Modules
PUBLIC
=
C
C
C
Users
Users
Public
Public
QT_AUTO_SCREEN_SCALE_FACTOR
=
0
0
SESSIONNAME
=
Console
Console
SystemDrive
=
C
C
C
SystemRoot
=
C
C
C
WINDOWS
WINDOWS
TEMP
=
C
C
C
Users
Users
jjadd
jjadd
AppData
AppData
Local
Local
Temp
Temp
TMP
=
C
C
C
Users
Users
jjadd
jjadd
AppData
AppData
Local
Local
Temp
Temp
USERDOMAIN
=
DESKTOP
-
SHLR506
SHLR506
USERDOMAIN_ROAMINGPROFILE
=
DESKTOP
-
SHLR506
SHLR506
USERNAME
=
jjadd
jjadd
USERPROFILE
=
C
C
C
Users
Users
jjadd
jjadd
windir
=
C
C
C
WINDOWS
WINDOWS
ZES_ENABLE_SYSMAN
=
1
1
TERM_PROGRAM
=
vscode
vscode
TERM_PROGRAM_VERSION
=
1.68
.
1
1
LANG
=
en_GB
.
UTF
-
8
8
COLORTERM
=
truecolor
truecolor
VSCODE_GIT_IPC_HANDLE
=
=
=
.
.
pipe
pipe
vscode
-
git
-
cd0c1385f8
-
sock
sock
VSCODE_GIT_ASKPASS_NODE
=
C
C
C
Users
Users
jjadd
jjadd
AppData
AppData
Local
Local
Programs
Programs
Microsoft
VS
Code
Code
Code
.
exe
exe
VSCODE_GIT_ASKPASS_EXTRA_ARGS
=
--
ms
-
enable
-
electron
-
run
-
as
-
node
node
VSCODE_GIT_ASKPASS_MAIN
=
c
c
c
Users
Users
jjadd
jjadd
AppData
AppData
Local
Local
Programs
Programs
Microsoft
VS
Code
Code
resources
resources
app
app
extensions
extensions
git
git
dist
dist
askpass
-
main
.
js
js
GIT_ASKPASS
=
c
c
c
Users
Users
jjadd
jjadd
AppData
AppData
Local
Local
Programs
Programs
Microsoft
VS
Code
Code
resources
resources
app
app
extensions
extensions
git
git
dist
dist
askpass
.
sh
sh
sh
sh
sh
sh
sh
sh
sh
sh
5
5
5
5
5
5
5
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
